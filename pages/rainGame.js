import{addClick,elAdd,getId,importPage}from"../scripts/helpers.js";import rainData from"../data/rainData.js";let score=0,time=2e3,sound="",timer="",wrong="",speed="slow";function setRainGame(){time=2e3,speed="slow",score=0;elAdd("AppContent",'<div id="container">\n    <div id="header">\n      <div id="headerBox">\n        <div id="headerText"><span id="newScore">0</span></div>\n        <span id="x">X<span>\n      </div>\n    </div>\n    <div id="sounds"></div>\n    <div id="wrongBox" class="hide">\n      <div id="wrong">Wrong</div>\n    </div>\n    <div id="controls">\n      <button>0</button>\n      <button>1</button>\n      <button>2</button>\n      <button>3</button>\n      <button>4</button>\n      <button>5</button>\n      <button>6</button>\n      <button>7</button>\n      <button>8</button>\n      <button>9</button>\n    </div>  \n  </div>'),addClick("x",returnToMenu),addClick("controls",checkSound),addToSoundArray()}function returnToMenu(){clearTimeout(timer),importPage("menu")}function removeSound(){sound[sound.length-1].remove()}function toggleWrong(){getId("wrongBox").classList.toggle("hide"),clearTimeout(wrong)}function checkSound(n){if((sound=getId("sounds").children)[sound.length-1].className[0]==n.target.textContent)removeSound(),200==(score+=10)&&(speed="medium",time=1500),400==score&&(speed="fast",time=1e3),elAdd("newScore",score);else{elAdd("newScore",score-=10),toggleWrong();setTimeout(toggleWrong,1e3)}}function lose(){return importPage("lose")}function checkHeight(){getId("sounds").offsetHeight>window.innerHeight-50?(clearTimeout(timer),lose()):timer=setTimeout(addToSoundArray,time)}function addToSoundArray(){checkHeight();let n=Math.floor(16*Math.random()),e=Math.floor(90*Math.random()),t=document.getElementById("sounds").innerHTML,o=`<div class='${rainData[n][1]}' style="margin-left:${e}%;">${rainData[n][0]}</div>`;elAdd("sounds",o+t),rainSpeed(speed)}function rainSpeed(n){getId("sounds").children[0].classList.add(n)}export default setRainGame;